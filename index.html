<!doctype html>
<html lang="en">
  <head>
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Expires" content="0">

    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"
    />
    <title>Pixel Word Hunter</title>

    <link
      href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap"
      rel="stylesheet"
    />
    <!-- Оставляем твой style.css для общих вещей, но важные стили перебьем ниже -->
    <link rel="stylesheet" href="./style.css?v=999_final_fi">
    <link rel="manifest" href="manifest.json" />

    <!-- ВСТРОЕННЫЕ СТИЛИ ДЛЯ ИДЕАЛЬНОГО ОТОБРАЖЕНИЯ МЕНЮ -->
    <style>
      /* --- СЕТКА КАТЕГОРИЙ (TRON STYLE) --- */
      #category-list {
        display: grid !important;
        /* Ровно 2 колонки на мобильных, растягиваются поровну */
        grid-template-columns: 1fr 1fr !important;
        gap: 12px !important;
        width: 95% !important;
        max-width: 600px !important;
        margin: 10px auto !important;
        padding: 5px !important;
        box-sizing: border-box !important;
        /* Высота и скролл */
        max-height: 65vh !important;
        overflow-y: auto !important;
        /* Кастомный скроллбар */
        scrollbar-width: thin;
        scrollbar-color: #ffd700 #001f3f;
      }

      /* Скроллбар для WebKit (Chrome, Safari) */
      #category-list::-webkit-scrollbar {
        width: 6px;
      }
      #category-list::-webkit-scrollbar-track {
        background: #001f3f;
      }
      #category-list::-webkit-scrollbar-thumb {
        background-color: #ffd700;
        border-radius: 4px;
      }

      /* --- КАРТОЧКА --- */
      .category-card {
        background-color: rgba(0, 31, 63, 0.9) !important; /* Темно-синий полупрозрачный */
        border: 2px solid #fff !important; /* Четкая белая рамка */
        box-shadow: 0 0 5px rgba(255,255,255,0.2) !important;
        color: #fff !important;
        padding: 12px 4px !important;
        
        display: flex !important;
        flex-direction: column !important;
        align-items: center !important;
        justify-content: center !important;
        text-align: center !important;
        
        min-height: 90px !important; /* Фиксированная минимальная высота */
        cursor: pointer !important;
        transition: transform 0.1s !important;
      }

      .category-card:active {
        transform: scale(0.96) !important;
        background-color: rgba(255,255,255,0.1) !important;
      }

      /* --- ТЕКСТ ВНУТРИ --- */
      .category-name {
        font-family: 'Press Start 2P', monospace !important; /* Твой пиксельный шрифт */
        font-size: 10px !important; /* Оптимальный размер для длинных слов */
        line-height: 1.4 !important;
        margin-bottom: 8px !important;
        text-transform: uppercase !important;
        word-break: break-word !important; /* Перенос длинных слов типа CORRESPONDENCE */
        color: #fff !important;
        text-shadow: 2px 2px 0 #000 !important;
      }

      .cat-stat {
        font-family: 'Courier New', monospace !important;
        font-size: 9px !important;
        font-weight: bold !important;
        line-height: 1.3 !important;
        letter-spacing: 0.5px !important;
      }

      /* Цвета */
      .stat-ns { color: #ff6b6b !important; } /* Красный */
      .stat-sl { color: #fbbf24 !important; } /* Желтый */
      .stat-ms { color: #4ade80 !important; } /* Зеленый */

      /* --- КНОПКА BACK ВНИЗУ --- */
      #back-btn-container button, .pixel-btn-back, #category-screen .exit-btn {
        width: 90% !important;
        max-width: 600px !important;
        display: block !important;
        margin: 15px auto !important;
        padding: 15px !important;
        background: transparent !important;
        border: 2px solid #fff !important;
        color: #fff !important;
        font-family: 'Press Start 2P', monospace !important;
        text-transform: uppercase !important;
        font-size: 12px !important;
      }
    </style>
  </head>
  <body>
    <div class="crt-overlay"></div>

    <div id="menu-screen" class="game-container">
      <h1 class="game-title">
        <span style="color: #fff">PIXEL</span><br />
        <span style="color: #fbbf24">WORD</span><br />
        <span style="color: #f87171">HUNTER</span>
      </h1>

      <div class="edition-badge">TOEIC EDITION</div>

      <div style="margin-bottom: 20px; font-size: 10px; color: #4ade80">
        MASTERED: <span id="mastered-count">0</span> /
        <span id="total-count">0</span>
      </div>

      <p class="blink">PRESS HUNT!</p>

      <!-- Исправленная кнопка -->
      <button type="button" class="start-btn" onclick="showCategories(); return false;">▶ HUNT</button>

      <div
        onclick="resetProgress()"
        style="
          margin-top: 30px;
          font-size: 8px;
          color: #6c757d;
          cursor: pointer;
          text-decoration: underline;
        "
      >
        RESET SAVE DATA
      </div>

      <div class="credits">© 2026 ALMAZ CORP</div>
    </div>

    <!-- ЭКРАН КАТЕГОРИЙ -->
    <div id="category-screen" class="game-container hidden">
      <h2 style="color: #fbbf24; margin: 15px 0 10px; font-size: 16px; font-family: 'Press Start 2P'; text-align: center;">
        SELECT CATEGORY
      </h2>

      <!-- Блок общей статистики категорий -->
      <div
        id="total-stats"
        style="
          font-family: 'Courier New', monospace;
          font-size: 10px;
          color: #4ade80;
          text-align: center;
          margin-bottom: 15px;
          font-weight: bold;
        "
      ></div>

      <!-- Сюда JS будет рендерить карточки -->
      <div id="category-list" class="category-grid"></div>

      <!-- Кнопка назад -->
      <button class="exit-btn" onclick="location.reload()">
        . BACK
      </button>
    </div>

    <div id="game-screen" class="game-container hidden">
      <header>
        <div class="stat">CAT: <span id="category">ALL</span></div>
        <div class="stat">XP: <span id="xp">0</span></div>
        <button class="exit-btn" onclick="exitGame()">✕</button>
      </header>

      <!-- МОДАЛЬНОЕ ОКНО ОБРАТНОЙ СВЯЗИ (Скрыто по умолчанию) -->
<div id="feedback-modal" class="modal-overlay">
  <div class="feedback-card">

    <!--Внутри <div id="feedback-modal" ...>-->
  <div class="feedback-card large-card">
    <h2 id="feedback-status" class="status-text">RESULT</h2>
    
    <!-- Контейнер для списка слов -->
    <div id="feedback-list" class="feedback-list">
      <!-- Сюда JavaScript будет вставлять карточки слов -->
    </div>

    <button id="next-btn" class="next-btn">NEXT -></button>
  </div>

</div>
</div>


      <main id="quiz-box">
        <div class="progress-bar"><div id="progress"></div></div>
        <div class="question-card">
          <h1 id="word">Ready?</h1>
        </div>
        <div class="options-grid" id="options"></div>
      </main>

      <div id="explanation-modal" class="hidden">
        <h2 style="color: #fbbf24; font-size: 12px; margin-bottom: 10px">
          WORD REVIEW
        </h2>
        <div id="explanation-list"></div>
        <button class="next-btn" onclick="nextQuestion()">NEXT ▶</button>
      </div>

      <div id="feedback" class="hidden">NICE!</div>
    </div>

    <script src="words_optimized.js"></script>
    <script src="app.js?v=337_FINAL_FIX"></script>
  </body>
</html>
